# SA-01: Statewide Submission and Verification Metrics

[â† Back to User Stories Master](../../design-outputs/02-user-stories.md) | [â† Back to Admin Stories](./index.md)

## User Story

**As a** State Administrator,
**I want to** view statewide submission and verification metrics,
**So that** I can monitor overall program health and identify systemic issues.

## Description

State-level metrics provide a holistic view of the stray dog capture and reporting program across all districts. This enables state administrators to:
- Track program adoption and growth
- Identify districts requiring intervention
- Measure overall program effectiveness
- Report to government stakeholders

## Acceptance Criteria

### Functional Requirements
- [ ] Dashboard showing total submissions across all districts
- [ ] Verification rate trends (approved, rejected, pending)
- [ ] Capture/resolution rate tracking
- [ ] District-level breakdown with drill-down capability
- [ ] Time-based filtering (daily, weekly, monthly, quarterly, yearly)
- [ ] Year-over-year and month-over-month comparisons
- [ ] Real-time vs historical data toggle
- [ ] Export capabilities for government reports

### Non-Functional Requirements
- [ ] Data aggregation from all districts within 5 seconds
- [ ] Historical data retention for 5 years
- [ ] Support for concurrent access by multiple state admins
- [ ] Role-based access control

## UI/UX Design

### Statewide Metrics Dashboard
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸ› Bihar State Dashboard                        Live â— | Dec 2026 â–¼        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  SUBMISSIONS   â”‚ â”‚  VERIFIED      â”‚ â”‚  CAPTURED      â”‚ â”‚  TEACHERS      â”‚â”‚
â”‚  â”‚    45,678      â”‚ â”‚    38,234      â”‚ â”‚    31,456      â”‚ â”‚    12,450      â”‚â”‚
â”‚  â”‚   â†‘12% MoM     â”‚ â”‚   84% rate     â”‚ â”‚   82% of ver.  â”‚ â”‚   â†‘8% MoM      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ðŸ“ˆ Submission & Verification Trends                    [YTD â–¼]        â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚   5000 â”¤                                              â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”‚â”‚
â”‚  â”‚        â”‚                                         â•­â”€â”€â”€â”€â•¯                 â”‚â”‚
â”‚  â”‚   4000 â”¤                                    â•­â”€â”€â”€â”€â•¯                      â”‚â”‚
â”‚  â”‚        â”‚                               â•­â”€â”€â”€â”€â•¯    â† Submissions          â”‚â”‚
â”‚  â”‚   3000 â”¤                          â•­â”€â”€â”€â”€â•¯                                â”‚â”‚
â”‚  â”‚        â”‚                     â•­â”€â”€â”€â”€â•¯ Â· Â· Â· Â· Â· Â· Â· Â· â† Verified          â”‚â”‚
â”‚  â”‚   2000 â”¤                â•­â”€â”€â”€â”€â•¯Â· Â· Â· Â·                                   â”‚â”‚
â”‚  â”‚        â”‚           â•­â”€â”€â”€â”€â•¯Â· Â· Â· Â·                                        â”‚â”‚
â”‚  â”‚   1000 â”¤      â•­â”€â”€â”€â”€â•¯Â· Â· Â· Â·         - - - - - - - - â† Captured          â”‚â”‚
â”‚  â”‚        â”‚ â•­â”€â”€â”€â”€â•¯Â· Â· Â· Â·                                                  â”‚â”‚
â”‚  â”‚      0 â”¼â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”‚â”‚
â”‚  â”‚        Jan  Feb  Mar  Apr  May  Jun  Jul  Aug  Sep  Oct  Nov  Dec       â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ðŸ—º District Performance Map                                           â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚â”‚
â”‚  â”‚      â”‚ Patna   â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 8,234 (18%)                              â”‚â”‚
â”‚  â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚â”‚
â”‚  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                     â”‚â”‚
â”‚  â”‚         â”‚ Gaya    â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 6,890 (15%)                             â”‚â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                     â”‚â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                          â”‚â”‚
â”‚  â”‚    â”‚Muzaffar â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 5,234 (11%)                                   â”‚â”‚
â”‚  â”‚    â”‚  pur    â”‚                                                          â”‚â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                          â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚    Legend: â–ˆâ–ˆâ–ˆâ–ˆ High  â–ˆâ–ˆâ–ˆ Medium  â–ˆâ–ˆ Low  â–ˆ Critical                   â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ðŸ“Š District Breakdown                               [Sort: Subs â–¼]    â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ District       â”‚ Subs     â”‚ Verified â”‚ Captured â”‚ Teachers â”‚ Trend     â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ Patna          â”‚  8,234   â”‚  7,123   â”‚  5,890   â”‚  2,340   â”‚ â†‘15%      â”‚â”‚
â”‚  â”‚ Gaya           â”‚  6,890   â”‚  5,678   â”‚  4,567   â”‚  1,890   â”‚ â†‘12%      â”‚â”‚
â”‚  â”‚ Muzaffarpur    â”‚  5,234   â”‚  4,345   â”‚  3,456   â”‚  1,456   â”‚ â†‘8%       â”‚â”‚
â”‚  â”‚ Bhagalpur      â”‚  4,567   â”‚  3,890   â”‚  3,123   â”‚  1,234   â”‚ â†‘10%      â”‚â”‚
â”‚  â”‚ Darbhanga      â”‚  3,890   â”‚  3,234   â”‚  2,678   â”‚  1,123   â”‚ â†“2%       â”‚â”‚
â”‚  â”‚ ... 33 more    â”‚          â”‚          â”‚          â”‚          â”‚           â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ðŸ“‰ Key Performance Indicators                                         â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  Verification Rate    â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â”‚  84%  Target: 85%     â”‚â”‚
â”‚  â”‚  Capture Rate         â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â”‚  82%  Target: 80% âœ“   â”‚â”‚
â”‚  â”‚  Teacher Participationâ”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚  52%  Target: 60%     â”‚â”‚
â”‚  â”‚  Avg. Resolution Time â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â”‚  4.2d Target: 5d âœ“    â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚              [Export to PDF] [Download Data] [Schedule Report] [Share]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Technical Implementation

### Statewide Metrics Service
```javascript
// src/services/stateAdmin/StatewideMetricsService.js

class StatewideMetricsService {
  static TIME_PERIODS = {
    DAILY: 'daily',
    WEEKLY: 'weekly',
    MONTHLY: 'monthly',
    QUARTERLY: 'quarterly',
    YEARLY: 'yearly',
    YTD: 'ytd'
  };

  static KPI_TARGETS = {
    VERIFICATION_RATE: 85,
    CAPTURE_RATE: 80,
    TEACHER_PARTICIPATION: 60,
    AVG_RESOLUTION_DAYS: 5
  };

  static async getStatewideMetrics(period = 'monthly', year = new Date().getFullYear()) {
    const params = new URLSearchParams({ period, year: year.toString() });
    const response = await fetch(`/api/state-admin/metrics/statewide?${params}`, {
      headers: { 'Authorization': `Bearer ${getAuthToken()}` }
    });
    return response.json();
  }

  static async getDistrictBreakdown(period, sortBy = 'submissions', order = 'desc') {
    const params = new URLSearchParams({ period, sortBy, order });
    const response = await fetch(`/api/state-admin/metrics/by-district?${params}`, {
      headers: { 'Authorization': `Bearer ${getAuthToken()}` }
    });
    return response.json();
  }

  static async getTrendData(startDate, endDate, granularity = 'monthly') {
    const params = new URLSearchParams({
      startDate: startDate.toISOString(),
      endDate: endDate.toISOString(),
      granularity
    });
    const response = await fetch(`/api/state-admin/metrics/trends?${params}`, {
      headers: { 'Authorization': `Bearer ${getAuthToken()}` }
    });
    return response.json();
  }

  static async getKPIs() {
    const response = await fetch('/api/state-admin/metrics/kpis', {
      headers: { 'Authorization': `Bearer ${getAuthToken()}` }
    });
    return response.json();
  }

  static calculateGrowthRate(current, previous) {
    if (previous === 0) return current > 0 ? 100 : 0;
    return Math.round(((current - previous) / previous) * 100);
  }

  static getKPIStatus(metric, value) {
    const target = this.KPI_TARGETS[metric];
    if (!target) return 'unknown';

    const percentage = (value / target) * 100;
    if (percentage >= 100) return 'achieved';
    if (percentage >= 90) return 'on-track';
    if (percentage >= 75) return 'at-risk';
    return 'critical';
  }

  static formatLargeNumber(num) {
    if (num >= 1000000) return `${(num / 1000000).toFixed(1)}M`;
    if (num >= 1000) return `${(num / 1000).toFixed(1)}K`;
    return num.toString();
  }
}

export default StatewideMetricsService;
```

### Statewide Dashboard Component
```jsx
// src/components/stateAdmin/StatewideDashboard.jsx
import React, { useState, useEffect, useMemo } from 'react';
import { Line, Bar } from 'react-chartjs-2';
import StatewideMetricsService from '../../services/stateAdmin/StatewideMetricsService';

function StatewideDashboard() {
  const [period, setPeriod] = useState('monthly');
  const [year, setYear] = useState(new Date().getFullYear());
  const [metrics, setMetrics] = useState(null);
  const [districts, setDistricts] = useState([]);
  const [trendData, setTrendData] = useState(null);
  const [kpis, setKPIs] = useState(null);
  const [loading, setLoading] = useState(true);
  const [liveMode, setLiveMode] = useState(true);

  useEffect(() => {
    fetchAllData();

    // Refresh every 5 minutes in live mode
    let interval;
    if (liveMode) {
      interval = setInterval(fetchAllData, 5 * 60 * 1000);
    }
    return () => clearInterval(interval);
  }, [period, year, liveMode]);

  const fetchAllData = async () => {
    setLoading(true);
    try {
      const [metricsData, districtsData, trends, kpiData] = await Promise.all([
        StatewideMetricsService.getStatewideMetrics(period, year),
        StatewideMetricsService.getDistrictBreakdown(period),
        StatewideMetricsService.getTrendData(
          new Date(year, 0, 1),
          new Date(year, 11, 31),
          'monthly'
        ),
        StatewideMetricsService.getKPIs()
      ]);

      setMetrics(metricsData);
      setDistricts(districtsData);
      setTrendData(trends);
      setKPIs(kpiData);
    } catch (error) {
      console.error('Failed to fetch statewide metrics:', error);
    } finally {
      setLoading(false);
    }
  };

  const chartData = useMemo(() => {
    if (!trendData) return null;

    return {
      labels: trendData.labels,
      datasets: [
        {
          label: 'Submissions',
          data: trendData.submissions,
          borderColor: '#2196f3',
          backgroundColor: 'rgba(33, 150, 243, 0.1)',
          fill: true
        },
        {
          label: 'Verified',
          data: trendData.verified,
          borderColor: '#4caf50',
          borderDash: [5, 5]
        },
        {
          label: 'Captured',
          data: trendData.captured,
          borderColor: '#ff9800',
          borderDash: [10, 5]
        }
      ]
    };
  }, [trendData]);

  if (loading && !metrics) {
    return <div className="loading-spinner">Loading statewide metrics...</div>;
  }

  return (
    <div className="statewide-dashboard">
      <header className="dashboard-header">
        <div className="header-title">
          <h1>Bihar State Dashboard</h1>
          <div className={`live-indicator ${liveMode ? 'active' : ''}`}>
            <span className="live-dot" />
            <button onClick={() => setLiveMode(!liveMode)}>
              {liveMode ? 'Live' : 'Paused'}
            </button>
          </div>
        </div>
        <div className="header-controls">
          <select value={period} onChange={(e) => setPeriod(e.target.value)}>
            {Object.entries(StatewideMetricsService.TIME_PERIODS).map(([key, value]) => (
              <option key={key} value={value}>{key}</option>
            ))}
          </select>
          <select value={year} onChange={(e) => setYear(parseInt(e.target.value))}>
            {[2026, 2023, 2022, 2021].map(y => (
              <option key={y} value={y}>{y}</option>
            ))}
          </select>
        </div>
      </header>

      {/* Summary Cards */}
      {metrics && (
        <div className="metrics-summary">
          <MetricCard
            title="Submissions"
            value={metrics.totalSubmissions}
            change={metrics.submissionsGrowth}
            suffix="MoM"
          />
          <MetricCard
            title="Verified"
            value={metrics.totalVerified}
            rate={metrics.verificationRate}
            suffix="rate"
          />
          <MetricCard
            title="Captured"
            value={metrics.totalCaptured}
            rate={metrics.captureRate}
            suffix="of ver."
          />
          <MetricCard
            title="Teachers"
            value={metrics.activeTeachers}
            change={metrics.teachersGrowth}
            suffix="MoM"
          />
        </div>
      )}

      {/* Trend Chart */}
      {chartData && (
        <div className="trend-chart-section">
          <h2>Submission & Verification Trends</h2>
          <Line
            data={chartData}
            options={{
              responsive: true,
              maintainAspectRatio: false,
              plugins: {
                legend: { position: 'bottom' }
              },
              scales: {
                y: { beginAtZero: true }
              }
            }}
          />
        </div>
      )}

      {/* District Breakdown */}
      <div className="district-breakdown">
        <h2>District Breakdown</h2>
        <table className="district-table">
          <thead>
            <tr>
              <th>District</th>
              <th>Submissions</th>
              <th>Verified</th>
              <th>Captured</th>
              <th>Teachers</th>
              <th>Trend</th>
            </tr>
          </thead>
          <tbody>
            {districts.map(district => (
              <tr key={district.id} onClick={() => handleDistrictClick(district.id)}>
                <td>{district.name}</td>
                <td>{district.submissions.toLocaleString()}</td>
                <td>{district.verified.toLocaleString()}</td>
                <td>{district.captured.toLocaleString()}</td>
                <td>{district.teachers.toLocaleString()}</td>
                <td>
                  <span className={`trend ${district.trend >= 0 ? 'positive' : 'negative'}`}>
                    {district.trend >= 0 ? 'â†‘' : 'â†“'}{Math.abs(district.trend)}%
                  </span>
                </td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>

      {/* KPIs */}
      {kpis && (
        <div className="kpi-section">
          <h2>Key Performance Indicators</h2>
          <div className="kpi-grid">
            <KPIBar
              label="Verification Rate"
              value={kpis.verificationRate}
              target={StatewideMetricsService.KPI_TARGETS.VERIFICATION_RATE}
            />
            <KPIBar
              label="Capture Rate"
              value={kpis.captureRate}
              target={StatewideMetricsService.KPI_TARGETS.CAPTURE_RATE}
            />
            <KPIBar
              label="Teacher Participation"
              value={kpis.teacherParticipation}
              target={StatewideMetricsService.KPI_TARGETS.TEACHER_PARTICIPATION}
            />
            <KPIBar
              label="Avg. Resolution Time"
              value={(StatewideMetricsService.KPI_TARGETS.AVG_RESOLUTION_DAYS - kpis.avgResolutionDays + StatewideMetricsService.KPI_TARGETS.AVG_RESOLUTION_DAYS) / StatewideMetricsService.KPI_TARGETS.AVG_RESOLUTION_DAYS * 50}
              target={100}
              displayValue={`${kpis.avgResolutionDays}d`}
              displayTarget={`${StatewideMetricsService.KPI_TARGETS.AVG_RESOLUTION_DAYS}d`}
            />
          </div>
        </div>
      )}

      {/* Actions */}
      <div className="dashboard-actions">
        <button className="btn-primary" onClick={() => exportToPDF()}>
          Export to PDF
        </button>
        <button className="btn-secondary" onClick={() => downloadData()}>
          Download Data
        </button>
        <button className="btn-secondary" onClick={() => scheduleReport()}>
          Schedule Report
        </button>
        <button className="btn-secondary" onClick={() => shareReport()}>
          Share
        </button>
      </div>
    </div>
  );

  function handleDistrictClick(districtId) {
    window.location.href = `/state-admin/district/${districtId}`;
  }
}

function MetricCard({ title, value, change, rate, suffix }) {
  return (
    <div className="metric-card">
      <div className="metric-title">{title}</div>
      <div className="metric-value">
        {StatewideMetricsService.formatLargeNumber(value)}
      </div>
      <div className="metric-subtitle">
        {change !== undefined && (
          <span className={`change ${change >= 0 ? 'positive' : 'negative'}`}>
            {change >= 0 ? 'â†‘' : 'â†“'}{Math.abs(change)}%
          </span>
        )}
        {rate !== undefined && (
          <span className="rate">{rate}%</span>
        )}
        <span className="suffix">{suffix}</span>
      </div>
    </div>
  );
}

function KPIBar({ label, value, target, displayValue, displayTarget }) {
  const percentage = Math.min((value / target) * 100, 100);
  const status = percentage >= 100 ? 'achieved' : percentage >= 90 ? 'on-track' : 'at-risk';

  return (
    <div className="kpi-bar">
      <div className="kpi-label">{label}</div>
      <div className="kpi-track">
        <div
          className={`kpi-fill ${status}`}
          style={{ width: `${percentage}%` }}
        />
      </div>
      <div className="kpi-values">
        <span className="current">{displayValue || `${value}%`}</span>
        <span className="target">Target: {displayTarget || `${target}%`}</span>
        {status === 'achieved' && <span className="check">âœ“</span>}
      </div>
    </div>
  );
}

export default StatewideDashboard;
```

### Backend API Aggregation
```javascript
// Backend: Aggregation query for statewide metrics
// This would be implemented in the DIGIT backend

const getStatewideMetrics = async (period, year) => {
  // Aggregate from all districts
  const pipeline = [
    {
      $match: {
        createdAt: {
          $gte: new Date(year, 0, 1),
          $lte: new Date(year, 11, 31)
        }
      }
    },
    {
      $group: {
        _id: null,
        totalSubmissions: { $sum: 1 },
        totalVerified: {
          $sum: { $cond: [{ $eq: ['$status', 'VERIFIED'] }, 1, 0] }
        },
        totalCaptured: {
          $sum: { $cond: [{ $eq: ['$resolutionStatus', 'CAPTURED'] }, 1, 0] }
        },
        uniqueTeachers: { $addToSet: '$teacherId' }
      }
    },
    {
      $project: {
        totalSubmissions: 1,
        totalVerified: 1,
        totalCaptured: 1,
        activeTeachers: { $size: '$uniqueTeachers' },
        verificationRate: {
          $multiply: [
            { $divide: ['$totalVerified', '$totalSubmissions'] },
            100
          ]
        },
        captureRate: {
          $multiply: [
            { $divide: ['$totalCaptured', '$totalVerified'] },
            100
          ]
        }
      }
    }
  ];

  return await IncidentCollection.aggregate(pipeline);
};
```

## Dependencies

- **All District APIs**: Aggregated data from all districts
- **egov-user**: Teacher counts across state
- **MC API**: Capture/resolution data

## Related Stories

- [DA-01](../district-admin/DA-01.md) - District Submission Trends
- [SA-02](./SA-02.md) - Compare Districts
- [SA-03](./SA-03.md) - Budget Utilization

## Notes

- Data is aggregated from all 38 Bihar districts
- Real-time mode refreshes every 5 minutes
- Historical data supports 5-year retention
- Export formats: PDF, Excel, CSV
- Role-based access ensures only state admins can view statewide data
