# SA-06: Configure System Parameters

[â† Back to User Stories Master](../../design-outputs/02-user-stories.md) | [â† Back to Admin Stories](./index.md)

## User Story

**As a** State Administrator,
**I want to** configure system parameters (payout rates, caps, penalty thresholds),
**So that** I can adapt the program to changing policies and budget constraints.

## Description

System configuration allows state administrators to adjust program parameters without code changes:
- Update payout amounts as policies change
- Adjust caps to manage budget
- Tune fraud detection thresholds
- Configure alert parameters
- Manage penalty rules

## Acceptance Criteria

### Functional Requirements
- [ ] Configure payout amount per successful capture
- [ ] Set monthly payout cap per teacher
- [ ] Configure fraud detection sensitivity
- [ ] Set penalty thresholds (rejection rate for suspension)
- [ ] Configure alert thresholds for anomaly detection
- [ ] Set system maintenance windows
- [ ] Preview impact of configuration changes
- [ ] Audit trail for all configuration changes
- [ ] Rollback capability for recent changes

### Non-Functional Requirements
- [ ] Changes require dual approval (maker-checker)
- [ ] Configuration history retained for 5 years
- [ ] Real-time validation of parameter values
- [ ] Scheduled configuration changes (effective date)

## UI/UX Design

### System Configuration Dashboard
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš™ï¸ System Configuration                                    [Save All]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Last Updated: Dec 7, 2024 10:30 AM by Admin (Rajesh K.)                   â”‚
â”‚  Pending Approvals: 2                                                       â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸ’° Payout Configuration                                               â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  Parameter              Current    New Value   Effective Date           â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  Payout per Capture     â‚¹500       [â‚¹500    ]  [Immediate â–¼]           â”‚â”‚
â”‚  â”‚  Info: Amount paid to teacher when dog is successfully captured         â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  Payout per Owner Claim â‚¹250       [â‚¹250    ]  [Immediate â–¼]           â”‚â”‚
â”‚  â”‚  Info: Amount paid when owner claims the dog                            â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  Payout per UTL Resolve â‚¹100       [â‚¹100    ]  [Immediate â–¼]           â”‚â”‚
â”‚  â”‚  Info: Amount paid when UTL case is later resolved                      â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  Monthly Cap per Teacher â‚¹5,000    [â‚¹5,000  ]  [Immediate â–¼]           â”‚â”‚
â”‚  â”‚  Info: Maximum monthly payout per teacher                               â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  âš  Pending Change: Monthly Cap â†’ â‚¹6,000 (Effective: Jan 1, 2025)       â”‚â”‚
â”‚  â”‚    Submitted by: Admin A | Awaiting approval from: Admin B              â”‚â”‚
â”‚  â”‚    [View Details] [Approve] [Reject]                                    â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸ›¡ï¸ Fraud Detection Thresholds                                         â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  Parameter                 Current    New Value    Sensitivity          â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  GPS Accuracy Threshold    10m       [10    ] m   [Standard â–¼]         â”‚â”‚
â”‚  â”‚  Info: Max distance between photo GPS and teacher's location            â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  Photo Similarity Score    85%       [85    ] %   [Standard â–¼]         â”‚â”‚
â”‚  â”‚  Info: Threshold for flagging duplicate photos                          â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  Max Submissions/Day       10        [10    ]     [Standard â–¼]         â”‚â”‚
â”‚  â”‚  Info: Maximum submissions per teacher per day                          â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  Anomaly Detection Level   Medium    [Medium â–¼]                        â”‚â”‚
â”‚  â”‚  Info: Low=fewer alerts, High=more sensitive                            â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  Risk Score Threshold      70        [70    ]     [Standard â–¼]         â”‚â”‚
â”‚  â”‚  Info: Score above this triggers fraud review                           â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  âš ï¸ Penalty Configuration                                              â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  Parameter                   Current    New Value   Info                â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  Rejection Rate Warning      20%       [20   ] %   First warning        â”‚â”‚
â”‚  â”‚  Rejection Rate Suspension   30%       [30   ] %   Temp suspension      â”‚â”‚
â”‚  â”‚  Rejection Rate Ban          50%       [50   ] %   Permanent ban        â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  Min Submissions for Penalty 10        [10   ]     Minimum sample       â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  Suspension Duration         7 days    [7    ] d   Temp suspension      â”‚â”‚
â”‚  â”‚  Appeal Window               30 days   [30   ] d   Time to appeal       â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸ”” Alert Configuration                                                â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  Alert Type                  Enabled   Threshold   Recipients           â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  Budget Threshold Alert      [âœ“]       [85   ] %   State Admins        â”‚â”‚
â”‚  â”‚  High Fraud Rate Alert       [âœ“]       [0.5  ] %   State + District    â”‚â”‚
â”‚  â”‚  Submission Spike Alert      [âœ“]       [300  ] %   District Admins     â”‚â”‚
â”‚  â”‚  MC Backlog Alert            [âœ“]       [7    ] d   State + MC Mgr      â”‚â”‚
â”‚  â”‚  System Health Alert         [âœ“]       [95   ] %   Tech Team           â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸ• System Settings                                                    â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  Setting                     Current Value                              â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  Daily Report Generation     [02:00   ] AM                              â”‚â”‚
â”‚  â”‚  Leaderboard Update          [00:00   ] (Midnight)                      â”‚â”‚
â”‚  â”‚  Data Retention Period       [5       ] years                           â”‚â”‚
â”‚  â”‚  Session Timeout             [30      ] minutes                         â”‚â”‚
â”‚  â”‚  Max Login Attempts          [5       ]                                 â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  Maintenance Window          [Sunday 2:00 AM - 4:00 AM        ]        â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸ“Š Impact Preview                                                     â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  Based on current pending changes:                                      â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  â€¢ Monthly Cap â‚¹5,000 â†’ â‚¹6,000                                         â”‚â”‚
â”‚  â”‚    - Estimated monthly budget impact: +â‚¹12.4L                          â”‚â”‚
â”‚  â”‚    - Teachers affected: 2,340 (who hit current cap)                    â”‚â”‚
â”‚  â”‚    - Expected payout increase per teacher: ~â‚¹530/month                 â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  [View Detailed Impact Analysis]                                       â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸ“œ Configuration History                                [View All]    â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  Date         Parameter          Old      New      Changed By           â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚â”‚
â”‚  â”‚  Dec 1, 2024  Monthly Cap        â‚¹4,500   â‚¹5,000   Admin (Priya S.)    â”‚â”‚
â”‚  â”‚  Nov 15, 2024 GPS Threshold      15m      10m      Admin (Rajesh K.)   â”‚â”‚
â”‚  â”‚  Nov 1, 2024  Payout per Capture â‚¹450     â‚¹500     Admin (Priya S.)    â”‚â”‚
â”‚  â”‚  ...                                                                    â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  [Export History] [Rollback Change]                                    â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚          [Save Draft] [Submit for Approval] [Reset to Defaults]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Technical Implementation

### System Configuration Service
```javascript
// src/services/stateAdmin/SystemConfigService.js

class SystemConfigService {
  static CONFIG_CATEGORIES = {
    PAYOUT: 'payout',
    FRAUD_DETECTION: 'fraud_detection',
    PENALTIES: 'penalties',
    ALERTS: 'alerts',
    SYSTEM: 'system'
  };

  static DEFAULT_CONFIG = {
    payout: {
      perCapture: 500,
      perOwnerClaim: 250,
      perUtlResolve: 100,
      monthlyCap: 5000
    },
    fraud_detection: {
      gpsAccuracyThreshold: 10,
      photoSimilarityThreshold: 85,
      maxSubmissionsPerDay: 10,
      anomalyLevel: 'medium',
      riskScoreThreshold: 70
    },
    penalties: {
      rejectionRateWarning: 20,
      rejectionRateSuspension: 30,
      rejectionRateBan: 50,
      minSubmissionsForPenalty: 10,
      suspensionDuration: 7,
      appealWindow: 30
    },
    alerts: {
      budgetThreshold: 85,
      highFraudRate: 0.5,
      submissionSpike: 300,
      mcBacklog: 7,
      systemHealth: 95
    },
    system: {
      dailyReportTime: '02:00',
      leaderboardUpdateTime: '00:00',
      dataRetentionYears: 5,
      sessionTimeoutMinutes: 30,
      maxLoginAttempts: 5,
      maintenanceWindow: 'Sunday 2:00 AM - 4:00 AM'
    }
  };

  static async getCurrentConfig() {
    const response = await fetch('/api/state-admin/config', {
      headers: { 'Authorization': `Bearer ${getAuthToken()}` }
    });
    return response.json();
  }

  static async getConfigHistory(limit = 50) {
    const response = await fetch(`/api/state-admin/config/history?limit=${limit}`, {
      headers: { 'Authorization': `Bearer ${getAuthToken()}` }
    });
    return response.json();
  }

  static async getPendingChanges() {
    const response = await fetch('/api/state-admin/config/pending', {
      headers: { 'Authorization': `Bearer ${getAuthToken()}` }
    });
    return response.json();
  }

  static async submitConfigChange(category, parameter, newValue, effectiveDate, justification) {
    const response = await fetch('/api/state-admin/config/submit', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${getAuthToken()}`
      },
      body: JSON.stringify({
        category,
        parameter,
        newValue,
        effectiveDate,
        justification
      })
    });
    return response.json();
  }

  static async approveConfigChange(changeId, comments) {
    const response = await fetch(`/api/state-admin/config/${changeId}/approve`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${getAuthToken()}`
      },
      body: JSON.stringify({ comments })
    });
    return response.json();
  }

  static async rejectConfigChange(changeId, reason) {
    const response = await fetch(`/api/state-admin/config/${changeId}/reject`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${getAuthToken()}`
      },
      body: JSON.stringify({ reason })
    });
    return response.json();
  }

  static async rollbackChange(changeId, reason) {
    const response = await fetch(`/api/state-admin/config/${changeId}/rollback`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${getAuthToken()}`
      },
      body: JSON.stringify({ reason })
    });
    return response.json();
  }

  static async previewImpact(changes) {
    const response = await fetch('/api/state-admin/config/preview-impact', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${getAuthToken()}`
      },
      body: JSON.stringify({ changes })
    });
    return response.json();
  }

  static async saveDraft(config) {
    const response = await fetch('/api/state-admin/config/draft', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${getAuthToken()}`
      },
      body: JSON.stringify(config)
    });
    return response.json();
  }

  static async exportHistory(format = 'csv') {
    const response = await fetch(`/api/state-admin/config/history/export?format=${format}`, {
      headers: { 'Authorization': `Bearer ${getAuthToken()}` }
    });
    return response.blob();
  }

  // Validation helpers
  static validatePayoutConfig(config) {
    const errors = [];

    if (config.perCapture < 0 || config.perCapture > 10000) {
      errors.push('Payout per capture must be between â‚¹0 and â‚¹10,000');
    }

    if (config.monthlyCap < config.perCapture) {
      errors.push('Monthly cap must be greater than single payout amount');
    }

    if (config.perOwnerClaim > config.perCapture) {
      errors.push('Owner claim payout should not exceed capture payout');
    }

    return errors;
  }

  static validateFraudConfig(config) {
    const errors = [];

    if (config.gpsAccuracyThreshold < 5 || config.gpsAccuracyThreshold > 100) {
      errors.push('GPS threshold must be between 5m and 100m');
    }

    if (config.photoSimilarityThreshold < 50 || config.photoSimilarityThreshold > 99) {
      errors.push('Photo similarity must be between 50% and 99%');
    }

    if (config.riskScoreThreshold < 30 || config.riskScoreThreshold > 90) {
      errors.push('Risk score threshold must be between 30 and 90');
    }

    return errors;
  }

  static validatePenaltyConfig(config) {
    const errors = [];

    if (config.rejectionRateWarning >= config.rejectionRateSuspension) {
      errors.push('Warning threshold must be less than suspension threshold');
    }

    if (config.rejectionRateSuspension >= config.rejectionRateBan) {
      errors.push('Suspension threshold must be less than ban threshold');
    }

    if (config.minSubmissionsForPenalty < 5) {
      errors.push('Minimum submissions for penalty must be at least 5');
    }

    return errors;
  }
}

export default SystemConfigService;
```

### System Configuration Component
```jsx
// src/components/stateAdmin/SystemConfiguration.jsx
import React, { useState, useEffect } from 'react';
import SystemConfigService from '../../services/stateAdmin/SystemConfigService';

function SystemConfiguration() {
  const [config, setConfig] = useState(null);
  const [pendingChanges, setPendingChanges] = useState([]);
  const [history, setHistory] = useState([]);
  const [draftConfig, setDraftConfig] = useState(null);
  const [impactPreview, setImpactPreview] = useState(null);
  const [validationErrors, setValidationErrors] = useState({});
  const [loading, setLoading] = useState(true);
  const [saving, setSaving] = useState(false);

  useEffect(() => {
    fetchConfigData();
  }, []);

  const fetchConfigData = async () => {
    setLoading(true);
    try {
      const [currentConfig, pending, historyData] = await Promise.all([
        SystemConfigService.getCurrentConfig(),
        SystemConfigService.getPendingChanges(),
        SystemConfigService.getConfigHistory(10)
      ]);

      setConfig(currentConfig);
      setDraftConfig({ ...currentConfig });
      setPendingChanges(pending);
      setHistory(historyData);
    } catch (error) {
      console.error('Failed to fetch config:', error);
    } finally {
      setLoading(false);
    }
  };

  const handleConfigChange = (category, parameter, value) => {
    setDraftConfig(prev => ({
      ...prev,
      [category]: {
        ...prev[category],
        [parameter]: value
      }
    }));

    // Validate on change
    validateCategory(category, { ...draftConfig[category], [parameter]: value });
  };

  const validateCategory = (category, categoryConfig) => {
    let errors = [];

    switch (category) {
      case 'payout':
        errors = SystemConfigService.validatePayoutConfig(categoryConfig);
        break;
      case 'fraud_detection':
        errors = SystemConfigService.validateFraudConfig(categoryConfig);
        break;
      case 'penalties':
        errors = SystemConfigService.validatePenaltyConfig(categoryConfig);
        break;
    }

    setValidationErrors(prev => ({ ...prev, [category]: errors }));
    return errors.length === 0;
  };

  const handlePreviewImpact = async () => {
    // Find changed values
    const changes = [];
    Object.keys(draftConfig).forEach(category => {
      Object.keys(draftConfig[category]).forEach(param => {
        if (draftConfig[category][param] !== config[category][param]) {
          changes.push({
            category,
            parameter: param,
            oldValue: config[category][param],
            newValue: draftConfig[category][param]
          });
        }
      });
    });

    if (changes.length > 0) {
      const impact = await SystemConfigService.previewImpact(changes);
      setImpactPreview(impact);
    }
  };

  const handleSaveDraft = async () => {
    setSaving(true);
    try {
      await SystemConfigService.saveDraft(draftConfig);
      alert('Draft saved successfully');
    } catch (error) {
      console.error('Failed to save draft:', error);
    } finally {
      setSaving(false);
    }
  };

  const handleSubmitForApproval = async () => {
    // Validate all categories
    let allValid = true;
    Object.keys(draftConfig).forEach(category => {
      if (!validateCategory(category, draftConfig[category])) {
        allValid = false;
      }
    });

    if (!allValid) {
      alert('Please fix validation errors before submitting');
      return;
    }

    setSaving(true);
    try {
      // Submit each changed parameter
      const changes = [];
      Object.keys(draftConfig).forEach(category => {
        Object.keys(draftConfig[category]).forEach(param => {
          if (draftConfig[category][param] !== config[category][param]) {
            changes.push({
              category,
              parameter: param,
              newValue: draftConfig[category][param]
            });
          }
        });
      });

      for (const change of changes) {
        await SystemConfigService.submitConfigChange(
          change.category,
          change.parameter,
          change.newValue,
          'immediate',
          ''
        );
      }

      alert('Changes submitted for approval');
      fetchConfigData();
    } catch (error) {
      console.error('Failed to submit changes:', error);
    } finally {
      setSaving(false);
    }
  };

  const handleApprove = async (changeId) => {
    try {
      await SystemConfigService.approveConfigChange(changeId, '');
      fetchConfigData();
    } catch (error) {
      console.error('Failed to approve:', error);
    }
  };

  const handleReject = async (changeId) => {
    const reason = prompt('Please provide a reason for rejection:');
    if (reason) {
      try {
        await SystemConfigService.rejectConfigChange(changeId, reason);
        fetchConfigData();
      } catch (error) {
        console.error('Failed to reject:', error);
      }
    }
  };

  const handleRollback = async (changeId) => {
    const reason = prompt('Please provide a reason for rollback:');
    if (reason) {
      try {
        await SystemConfigService.rollbackChange(changeId, reason);
        fetchConfigData();
      } catch (error) {
        console.error('Failed to rollback:', error);
      }
    }
  };

  if (loading) {
    return <div className="loading-spinner">Loading configuration...</div>;
  }

  return (
    <div className="system-configuration">
      <header className="config-header">
        <h1>System Configuration</h1>
        <button className="btn-primary" onClick={handleSubmitForApproval} disabled={saving}>
          Save All
        </button>
      </header>

      <div className="config-meta">
        <span>Last Updated: {config?.lastUpdated}</span>
        <span>Pending Approvals: {pendingChanges.length}</span>
      </div>

      {/* Payout Configuration */}
      <ConfigSection
        title="Payout Configuration"
        icon="ğŸ’°"
        config={draftConfig?.payout}
        originalConfig={config?.payout}
        onChange={(param, value) => handleConfigChange('payout', param, value)}
        errors={validationErrors.payout}
        fields={[
          { key: 'perCapture', label: 'Payout per Capture', type: 'currency', info: 'Amount paid to teacher when dog is successfully captured' },
          { key: 'perOwnerClaim', label: 'Payout per Owner Claim', type: 'currency', info: 'Amount paid when owner claims the dog' },
          { key: 'perUtlResolve', label: 'Payout per UTL Resolve', type: 'currency', info: 'Amount paid when UTL case is later resolved' },
          { key: 'monthlyCap', label: 'Monthly Cap per Teacher', type: 'currency', info: 'Maximum monthly payout per teacher' }
        ]}
      />

      {/* Pending Changes for Payout */}
      {pendingChanges.filter(c => c.category === 'payout').map(change => (
        <PendingChangeAlert
          key={change.id}
          change={change}
          onApprove={() => handleApprove(change.id)}
          onReject={() => handleReject(change.id)}
        />
      ))}

      {/* Fraud Detection */}
      <ConfigSection
        title="Fraud Detection Thresholds"
        icon="ğŸ›¡ï¸"
        config={draftConfig?.fraud_detection}
        originalConfig={config?.fraud_detection}
        onChange={(param, value) => handleConfigChange('fraud_detection', param, value)}
        errors={validationErrors.fraud_detection}
        fields={[
          { key: 'gpsAccuracyThreshold', label: 'GPS Accuracy Threshold', type: 'number', unit: 'm', info: 'Max distance between photo GPS and teacher\'s location' },
          { key: 'photoSimilarityThreshold', label: 'Photo Similarity Score', type: 'number', unit: '%', info: 'Threshold for flagging duplicate photos' },
          { key: 'maxSubmissionsPerDay', label: 'Max Submissions/Day', type: 'number', info: 'Maximum submissions per teacher per day' },
          { key: 'anomalyLevel', label: 'Anomaly Detection Level', type: 'select', options: ['low', 'medium', 'high'], info: 'Low=fewer alerts, High=more sensitive' },
          { key: 'riskScoreThreshold', label: 'Risk Score Threshold', type: 'number', info: 'Score above this triggers fraud review' }
        ]}
      />

      {/* Penalty Configuration */}
      <ConfigSection
        title="Penalty Configuration"
        icon="âš ï¸"
        config={draftConfig?.penalties}
        originalConfig={config?.penalties}
        onChange={(param, value) => handleConfigChange('penalties', param, value)}
        errors={validationErrors.penalties}
        fields={[
          { key: 'rejectionRateWarning', label: 'Rejection Rate Warning', type: 'number', unit: '%', info: 'First warning threshold' },
          { key: 'rejectionRateSuspension', label: 'Rejection Rate Suspension', type: 'number', unit: '%', info: 'Temporary suspension threshold' },
          { key: 'rejectionRateBan', label: 'Rejection Rate Ban', type: 'number', unit: '%', info: 'Permanent ban threshold' },
          { key: 'minSubmissionsForPenalty', label: 'Min Submissions for Penalty', type: 'number', info: 'Minimum sample size' },
          { key: 'suspensionDuration', label: 'Suspension Duration', type: 'number', unit: 'days', info: 'Temporary suspension period' },
          { key: 'appealWindow', label: 'Appeal Window', type: 'number', unit: 'days', info: 'Time to appeal decision' }
        ]}
      />

      {/* Alert Configuration */}
      <ConfigSection
        title="Alert Configuration"
        icon="ğŸ””"
        config={draftConfig?.alerts}
        originalConfig={config?.alerts}
        onChange={(param, value) => handleConfigChange('alerts', param, value)}
        errors={validationErrors.alerts}
        fields={[
          { key: 'budgetThreshold', label: 'Budget Threshold Alert', type: 'number', unit: '%' },
          { key: 'highFraudRate', label: 'High Fraud Rate Alert', type: 'number', unit: '%' },
          { key: 'submissionSpike', label: 'Submission Spike Alert', type: 'number', unit: '%' },
          { key: 'mcBacklog', label: 'MC Backlog Alert', type: 'number', unit: 'days' },
          { key: 'systemHealth', label: 'System Health Alert', type: 'number', unit: '%' }
        ]}
      />

      {/* System Settings */}
      <ConfigSection
        title="System Settings"
        icon="ğŸ•"
        config={draftConfig?.system}
        originalConfig={config?.system}
        onChange={(param, value) => handleConfigChange('system', param, value)}
        errors={validationErrors.system}
        fields={[
          { key: 'dailyReportTime', label: 'Daily Report Generation', type: 'time' },
          { key: 'leaderboardUpdateTime', label: 'Leaderboard Update', type: 'time' },
          { key: 'dataRetentionYears', label: 'Data Retention Period', type: 'number', unit: 'years' },
          { key: 'sessionTimeoutMinutes', label: 'Session Timeout', type: 'number', unit: 'minutes' },
          { key: 'maxLoginAttempts', label: 'Max Login Attempts', type: 'number' },
          { key: 'maintenanceWindow', label: 'Maintenance Window', type: 'text' }
        ]}
      />

      {/* Impact Preview */}
      {impactPreview && (
        <div className="impact-preview-section">
          <h2>Impact Preview</h2>
          <div className="impact-details">
            {impactPreview.items.map((item, i) => (
              <div key={i} className="impact-item">
                <strong>{item.description}</strong>
                <ul>
                  {item.effects.map((effect, j) => (
                    <li key={j}>{effect}</li>
                  ))}
                </ul>
              </div>
            ))}
          </div>
        </div>
      )}

      {/* Configuration History */}
      <div className="history-section">
        <div className="section-header">
          <h2>Configuration History</h2>
          <button className="btn-link">View All</button>
        </div>
        <table className="history-table">
          <thead>
            <tr>
              <th>Date</th>
              <th>Parameter</th>
              <th>Old</th>
              <th>New</th>
              <th>Changed By</th>
            </tr>
          </thead>
          <tbody>
            {history.map(entry => (
              <tr key={entry.id}>
                <td>{entry.date}</td>
                <td>{entry.parameter}</td>
                <td>{entry.oldValue}</td>
                <td>{entry.newValue}</td>
                <td>{entry.changedBy}</td>
              </tr>
            ))}
          </tbody>
        </table>
        <div className="history-actions">
          <button className="btn-secondary" onClick={() => SystemConfigService.exportHistory()}>
            Export History
          </button>
          <button className="btn-secondary" onClick={() => {}}>
            Rollback Change
          </button>
        </div>
      </div>

      {/* Action Buttons */}
      <div className="config-actions">
        <button className="btn-secondary" onClick={handleSaveDraft} disabled={saving}>
          Save Draft
        </button>
        <button className="btn-primary" onClick={handleSubmitForApproval} disabled={saving}>
          Submit for Approval
        </button>
        <button className="btn-danger" onClick={() => setDraftConfig({ ...config })}>
          Reset to Defaults
        </button>
      </div>
    </div>
  );
}

function ConfigSection({ title, icon, config, originalConfig, onChange, errors, fields }) {
  return (
    <div className="config-section">
      <h2>{icon} {title}</h2>
      <table className="config-table">
        <thead>
          <tr>
            <th>Parameter</th>
            <th>Current</th>
            <th>New Value</th>
            <th>Info</th>
          </tr>
        </thead>
        <tbody>
          {fields.map(field => (
            <tr key={field.key} className={config[field.key] !== originalConfig[field.key] ? 'changed' : ''}>
              <td>{field.label}</td>
              <td>{originalConfig[field.key]}{field.unit ? ` ${field.unit}` : ''}</td>
              <td>
                {field.type === 'select' ? (
                  <select
                    value={config[field.key]}
                    onChange={(e) => onChange(field.key, e.target.value)}
                  >
                    {field.options.map(opt => (
                      <option key={opt} value={opt}>{opt}</option>
                    ))}
                  </select>
                ) : (
                  <input
                    type={field.type === 'currency' ? 'number' : field.type}
                    value={config[field.key]}
                    onChange={(e) => onChange(field.key, field.type === 'number' || field.type === 'currency' ? parseFloat(e.target.value) : e.target.value)}
                  />
                )}
                {field.unit && <span className="unit">{field.unit}</span>}
              </td>
              <td className="info-cell">{field.info}</td>
            </tr>
          ))}
        </tbody>
      </table>
      {errors && errors.length > 0 && (
        <div className="validation-errors">
          {errors.map((error, i) => (
            <div key={i} className="error-message">{error}</div>
          ))}
        </div>
      )}
    </div>
  );
}

function PendingChangeAlert({ change, onApprove, onReject }) {
  return (
    <div className="pending-change-alert">
      <div className="alert-icon">âš </div>
      <div className="alert-content">
        <strong>Pending Change:</strong> {change.parameter} â†’ {change.newValue}
        (Effective: {change.effectiveDate})
        <div className="alert-meta">
          Submitted by: {change.submittedBy} | Awaiting approval from: {change.approvingAdmin}
        </div>
      </div>
      <div className="alert-actions">
        <button className="btn-link" onClick={onApprove}>Approve</button>
        <button className="btn-link" onClick={onReject}>Reject</button>
      </div>
    </div>
  );
}

export default SystemConfiguration;
```

## Dependencies

- **Authentication**: Role-based access (state admin only)
- **Audit Service**: Change tracking
- **Notification Service**: Approval notifications

## Related Stories

- [SA-03](./SA-03.md) - Budget Utilization
- [SA-04](./SA-04.md) - Fraud Analytics
- [SA-07](./SA-07.md) - Real-time Alerts

## Notes

- All configuration changes require maker-checker approval
- Changes are audited with full history
- Impact preview shows estimated effects
- Rollback available for recent changes
- Scheduled changes can have future effective dates
