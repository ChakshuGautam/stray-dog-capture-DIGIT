# =============================================================================
# Fraud Detection Service - Application Configuration
# =============================================================================

# Server Configuration
server.port=8097
server.context-path=/fraud
server.servlet.context-path=/fraud

# =============================================================================
# MDMS Configuration
# =============================================================================
egov.mdms.host=http://localhost:8094
egov.mdms.search.endpoint=/egov-mdms-service/v1/_search
fraud.mdms.module=FRAUD-DETECTION

# =============================================================================
# External Validator Defaults
# =============================================================================
fraud.external.timeout.connect.ms=5000
fraud.external.timeout.read.ms=30000
fraud.external.retry.max-attempts=3
fraud.external.retry.backoff.ms=1000

# =============================================================================
# Scoring Thresholds
# =============================================================================
# Score <= 20: APPROVE automatically
# Score 21-50: MANUAL_REVIEW required
# Score > 50: AUTO_REJECT
fraud.score.threshold.approve=20
fraud.score.threshold.manual-review=50
fraud.score.threshold.auto-reject=80

# =============================================================================
# Risk Level Thresholds
# =============================================================================
fraud.risk.threshold.low=25
fraud.risk.threshold.medium=50
fraud.risk.threshold.high=75

# =============================================================================
# Caching Configuration
# =============================================================================
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=500,expireAfterWrite=300s
fraud.cache.rules.ttl.seconds=300
fraud.cache.validators.ttl.seconds=300

# =============================================================================
# Kafka Configuration
# =============================================================================
spring.kafka.bootstrap-servers=localhost:9092
spring.kafka.consumer.group-id=fraud-detection-service
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer

kafka.topics.fraud.evaluation.result=fraud-evaluation-result
kafka.topics.fraud.alert=fraud-alert

# =============================================================================
# Resilience4j Circuit Breaker Configuration
# =============================================================================
resilience4j.circuitbreaker.instances.externalValidator.registerHealthIndicator=true
resilience4j.circuitbreaker.instances.externalValidator.slidingWindowSize=10
resilience4j.circuitbreaker.instances.externalValidator.minimumNumberOfCalls=5
resilience4j.circuitbreaker.instances.externalValidator.failureRateThreshold=50
resilience4j.circuitbreaker.instances.externalValidator.waitDurationInOpenState=60s
resilience4j.circuitbreaker.instances.externalValidator.permittedNumberOfCallsInHalfOpenState=3

# Retry Configuration
resilience4j.retry.instances.externalValidator.maxAttempts=3
resilience4j.retry.instances.externalValidator.waitDuration=1s
resilience4j.retry.instances.externalValidator.retryExceptions=java.io.IOException,java.net.SocketTimeoutException

# =============================================================================
# Logging Configuration
# =============================================================================
logging.level.org.digit.fraud=DEBUG
logging.level.org.springframework.web=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# =============================================================================
# Actuator Endpoints
# =============================================================================
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always
