# Server Configuration
server.port=8095
server.context-path=/upi-payout-adapter
server.servlet.context-path=/upi-payout-adapter

# Application Info
spring.application.name=upi-payout-adapter
spring.profiles.active=default

# Database Configuration
spring.datasource.url=jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:egov_upi}
spring.datasource.username=${DB_USER:postgres}
spring.datasource.password=${DB_PASSWORD:postgres}
spring.datasource.driver-class-name=org.postgresql.Driver

# Connection Pool
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.idle-timeout=30000
spring.datasource.hikari.pool-name=UpiPayoutPool
spring.datasource.hikari.max-lifetime=2000000
spring.datasource.hikari.connection-timeout=30000

# Flyway Migration
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true
spring.flyway.locations=classpath:db/migration

# Kafka Configuration
spring.kafka.bootstrap-servers=${KAFKA_BROKERS:localhost:9092}
spring.kafka.consumer.group-id=upi-payout-adapter
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.enable-auto-commit=true
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.springframework.kafka.support.serializer.JsonDeserializer
spring.kafka.consumer.properties.spring.json.trusted.packages=*
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer

# UPI Provider Configuration (Razorpay)
upi.provider.name=RAZORPAY
upi.provider.keyId=${RAZORPAY_KEY_ID}
upi.provider.keySecret=${RAZORPAY_KEY_SECRET}
upi.provider.baseUrl=https://api.razorpay.com/v1
upi.provider.timeout=30000

# Payout Configuration
upi.payout.mode=UPI
upi.payout.purpose=payout
upi.payout.currency=INR
upi.payout.maxRetries=3
upi.payout.retryDelayMs=5000
upi.payout.numberFormat=SDCRS/UPI/[fy:yyyy-yy]/[SEQ]

# Webhook Configuration
upi.webhook.secret=${UPI_WEBHOOK_SECRET}
upi.webhook.enabled=true

# Kafka Topics
upi.kafka.topic.create=upi-payout-create
upi.kafka.topic.status=upi-payout-status
upi.kafka.topic.error=upi-payout-error
upi.kafka.topic.persist=upi-payout-persist
sdcrs.callback.topic=sdcrs-payout-callback

# Validation
upi.validation.vpaPattern=^[a-zA-Z0-9.\\-_]{2,256}@[a-zA-Z]{2,64}$
upi.validation.minAmount=1
upi.validation.maxAmount=100000

# Idempotency
upi.idempotency.enabled=true
upi.idempotency.ttlMinutes=1440

# DIGIT Services
egov.user.host=${USER_SERVICE_HOST:http://localhost:8107}
egov.mdms.host=${MDMS_SERVICE_HOST:http://localhost:8094}
egov.individual.host=${INDIVIDUAL_SERVICE_HOST:http://localhost:8101}

# Actuator
management.endpoints.web.exposure.include=health,info,prometheus
management.endpoint.health.show-details=always

# Logging
logging.level.org.egov.upi=DEBUG
logging.level.com.razorpay=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# Tracer
tracer.errors.provideExceptionInDetails=true
