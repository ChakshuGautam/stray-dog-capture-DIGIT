{
  "tenantId": "ncr",
  "moduleName": "Studio",
  "ServiceConfiguration": [
    {
      "module": "SDCRS",
      "service": "STRAY_DOG_REPORT",
      "version": "1.0",

      "fields": [
        {
          "name": "reportType",
          "type": "dropdown",
          "label": "SDCRS_REPORT_TYPE",
          "required": true,
          "orderNumber": 1,
          "values": ["AGGRESSIVE", "INJURED", "PACK", "STANDARD"],
          "validation": {
            "message": "SDCRS_ERR_REPORT_TYPE_REQUIRED"
          }
        },
        {
          "name": "dogDescription",
          "type": "textarea",
          "label": "SDCRS_DOG_DESCRIPTION",
          "required": true,
          "orderNumber": 2,
          "minLength": 10,
          "maxLength": 500,
          "placeholder": "SDCRS_DOG_DESCRIPTION_PLACEHOLDER",
          "validation": {
            "min": 10,
            "max": 500,
            "message": "SDCRS_ERR_DESCRIPTION_LENGTH"
          }
        },
        {
          "name": "dogCount",
          "type": "number",
          "label": "SDCRS_DOG_COUNT",
          "required": true,
          "orderNumber": 3,
          "validation": {
            "min": 1,
            "max": 20,
            "message": "SDCRS_ERR_DOG_COUNT_RANGE"
          }
        },
        {
          "name": "isAggressive",
          "type": "checkbox",
          "label": "SDCRS_IS_AGGRESSIVE",
          "required": false,
          "orderNumber": 4
        },
        {
          "name": "estimatedAge",
          "type": "dropdown",
          "label": "SDCRS_ESTIMATED_AGE",
          "required": false,
          "orderNumber": 5,
          "values": ["PUPPY", "YOUNG", "ADULT", "SENIOR"]
        },
        {
          "name": "distinctiveMarks",
          "type": "text",
          "label": "SDCRS_DISTINCTIVE_MARKS",
          "required": false,
          "orderNumber": 6,
          "maxLength": 200
        },
        {
          "name": "location",
          "type": "location",
          "label": "SDCRS_LOCATION",
          "required": true,
          "orderNumber": 7,
          "schema": "gps",
          "validation": {
            "message": "SDCRS_ERR_LOCATION_REQUIRED"
          }
        },
        {
          "name": "landmark",
          "type": "text",
          "label": "SDCRS_LANDMARK",
          "required": false,
          "orderNumber": 8,
          "maxLength": 200
        },
        {
          "name": "teacherId",
          "type": "text",
          "label": "SDCRS_TEACHER_ID",
          "required": true,
          "orderNumber": 9,
          "reference": "HRMS.Employee"
        },
        {
          "name": "schoolCode",
          "type": "text",
          "label": "SDCRS_SCHOOL_CODE",
          "required": true,
          "orderNumber": 10
        },
        {
          "name": "resolutionType",
          "type": "dropdown",
          "label": "SDCRS_RESOLUTION_TYPE",
          "required": false,
          "orderNumber": 20,
          "values": ["CAPTURED", "RELOCATED", "STERILIZED_RELEASED", "UNABLE_TO_LOCATE", "ALREADY_RESOLVED"],
          "dependencies": ["state:IN_PROGRESS"]
        },
        {
          "name": "resolutionNotes",
          "type": "textarea",
          "label": "SDCRS_RESOLUTION_NOTES",
          "required": false,
          "orderNumber": 21,
          "maxLength": 1000,
          "dependencies": ["state:IN_PROGRESS"]
        },
        {
          "name": "shelterName",
          "type": "text",
          "label": "SDCRS_SHELTER_NAME",
          "required": false,
          "orderNumber": 22,
          "dependencies": ["resolutionType:CAPTURED"]
        },
        {
          "name": "rejectionReason",
          "type": "dropdown",
          "label": "SDCRS_REJECTION_REASON",
          "required": false,
          "orderNumber": 30,
          "values": ["UNCLEAR_PHOTO", "NO_DOG_VISIBLE", "DUPLICATE_REPORT", "OUTSIDE_BOUNDARY", "INVALID_LOCATION", "FRAUDULENT_SUBMISSION"],
          "dependencies": ["action:REJECT"]
        },
        {
          "name": "duplicateOfReportNumber",
          "type": "text",
          "label": "SDCRS_DUPLICATE_OF",
          "required": false,
          "orderNumber": 31,
          "dependencies": ["action:MARK_DUPLICATE"]
        }
      ],

      "workflow": {
        "businessService": "SDCRS",
        "business": "sdcrs-services",
        "businessServiceSla": 259200000,
        "generateDemandAt": ["CAPTURED"],
        "nextActionAfterPayment": null,
        "states": [
          {
            "tenantId": "ncr",
            "sla": null,
            "state": "",
            "applicationStatus": "",
            "docUploadRequired": true,
            "isStartState": true,
            "isTerminateState": false,
            "isStateUpdatable": true,
            "actions": [
              {
                "tenantId": "ncr",
                "currentState": "",
                "action": "SUBMIT",
                "nextState": "PENDING_VALIDATION",
                "roles": ["CITIZEN", "TEACHER"],
                "active": true
              }
            ]
          },
          {
            "tenantId": "ncr",
            "sla": 3600000,
            "state": "PENDING_VALIDATION",
            "applicationStatus": "PENDING_VALIDATION",
            "docUploadRequired": false,
            "isStartState": false,
            "isTerminateState": false,
            "isStateUpdatable": false,
            "actions": [
              {
                "tenantId": "ncr",
                "currentState": "PENDING_VALIDATION",
                "action": "AUTO_VALIDATE_PASS",
                "nextState": "PENDING_VERIFICATION",
                "roles": ["SYSTEM"],
                "active": true
              },
              {
                "tenantId": "ncr",
                "currentState": "PENDING_VALIDATION",
                "action": "AUTO_VALIDATE_FAIL",
                "nextState": "AUTO_REJECTED",
                "roles": ["SYSTEM"],
                "active": true
              }
            ]
          },
          {
            "tenantId": "ncr",
            "sla": null,
            "state": "AUTO_REJECTED",
            "applicationStatus": "AUTO_REJECTED",
            "docUploadRequired": false,
            "isStartState": false,
            "isTerminateState": true,
            "isStateUpdatable": false,
            "actions": []
          },
          {
            "tenantId": "ncr",
            "sla": 86400000,
            "state": "PENDING_VERIFICATION",
            "applicationStatus": "PENDING_VERIFICATION",
            "docUploadRequired": false,
            "isStartState": false,
            "isTerminateState": false,
            "isStateUpdatable": false,
            "actions": [
              {
                "tenantId": "ncr",
                "currentState": "PENDING_VERIFICATION",
                "action": "VERIFY",
                "nextState": "VERIFIED",
                "roles": ["VERIFIER", "GRO"],
                "active": true
              },
              {
                "tenantId": "ncr",
                "currentState": "PENDING_VERIFICATION",
                "action": "REJECT",
                "nextState": "REJECTED",
                "roles": ["VERIFIER", "GRO"],
                "active": true
              },
              {
                "tenantId": "ncr",
                "currentState": "PENDING_VERIFICATION",
                "action": "MARK_DUPLICATE",
                "nextState": "DUPLICATE",
                "roles": ["VERIFIER", "GRO"],
                "active": true
              }
            ]
          },
          {
            "tenantId": "ncr",
            "sla": null,
            "state": "REJECTED",
            "applicationStatus": "REJECTED",
            "docUploadRequired": false,
            "isStartState": false,
            "isTerminateState": true,
            "isStateUpdatable": false,
            "actions": []
          },
          {
            "tenantId": "ncr",
            "sla": null,
            "state": "DUPLICATE",
            "applicationStatus": "DUPLICATE",
            "docUploadRequired": false,
            "isStartState": false,
            "isTerminateState": true,
            "isStateUpdatable": false,
            "actions": []
          },
          {
            "tenantId": "ncr",
            "sla": 3600000,
            "state": "VERIFIED",
            "applicationStatus": "VERIFIED",
            "docUploadRequired": false,
            "isStartState": false,
            "isTerminateState": false,
            "isStateUpdatable": false,
            "actions": [
              {
                "tenantId": "ncr",
                "currentState": "VERIFIED",
                "action": "ASSIGN",
                "nextState": "ASSIGNED",
                "roles": ["MC_SUPERVISOR", "GRO"],
                "active": true
              }
            ]
          },
          {
            "tenantId": "ncr",
            "sla": 172800000,
            "state": "ASSIGNED",
            "applicationStatus": "ASSIGNED",
            "docUploadRequired": false,
            "isStartState": false,
            "isTerminateState": false,
            "isStateUpdatable": true,
            "actions": [
              {
                "tenantId": "ncr",
                "currentState": "ASSIGNED",
                "action": "START_FIELD_VISIT",
                "nextState": "IN_PROGRESS",
                "roles": ["MC_OFFICER"],
                "active": true
              },
              {
                "tenantId": "ncr",
                "currentState": "ASSIGNED",
                "action": "REASSIGN",
                "nextState": "VERIFIED",
                "roles": ["MC_SUPERVISOR", "GRO"],
                "active": true
              }
            ]
          },
          {
            "tenantId": "ncr",
            "sla": 86400000,
            "state": "IN_PROGRESS",
            "applicationStatus": "IN_PROGRESS",
            "docUploadRequired": false,
            "isStartState": false,
            "isTerminateState": false,
            "isStateUpdatable": true,
            "actions": [
              {
                "tenantId": "ncr",
                "currentState": "IN_PROGRESS",
                "action": "MARK_CAPTURED",
                "nextState": "CAPTURED",
                "roles": ["MC_OFFICER"],
                "active": true
              },
              {
                "tenantId": "ncr",
                "currentState": "IN_PROGRESS",
                "action": "MARK_UNABLE_TO_LOCATE",
                "nextState": "UNABLE_TO_LOCATE",
                "roles": ["MC_OFFICER"],
                "active": true
              }
            ]
          },
          {
            "tenantId": "ncr",
            "sla": 3600000,
            "state": "CAPTURED",
            "applicationStatus": "CAPTURED",
            "docUploadRequired": true,
            "isStartState": false,
            "isTerminateState": false,
            "isStateUpdatable": false,
            "actions": [
              {
                "tenantId": "ncr",
                "currentState": "CAPTURED",
                "action": "INITIATE_PAYOUT",
                "nextState": "PAYOUT_PENDING",
                "roles": ["SYSTEM"],
                "active": true
              }
            ]
          },
          {
            "tenantId": "ncr",
            "sla": 86400000,
            "state": "PAYOUT_PENDING",
            "applicationStatus": "PAYOUT_PENDING",
            "docUploadRequired": false,
            "isStartState": false,
            "isTerminateState": false,
            "isStateUpdatable": false,
            "actions": [
              {
                "tenantId": "ncr",
                "currentState": "PAYOUT_PENDING",
                "action": "PAYOUT_SUCCESS",
                "nextState": "RESOLVED",
                "roles": ["SYSTEM"],
                "active": true
              },
              {
                "tenantId": "ncr",
                "currentState": "PAYOUT_PENDING",
                "action": "PAYOUT_FAILED",
                "nextState": "PAYOUT_FAILED",
                "roles": ["SYSTEM"],
                "active": true
              }
            ]
          },
          {
            "tenantId": "ncr",
            "sla": null,
            "state": "PAYOUT_FAILED",
            "applicationStatus": "PAYOUT_FAILED",
            "docUploadRequired": false,
            "isStartState": false,
            "isTerminateState": false,
            "isStateUpdatable": false,
            "actions": [
              {
                "tenantId": "ncr",
                "currentState": "PAYOUT_FAILED",
                "action": "RETRY_PAYOUT",
                "nextState": "PAYOUT_PENDING",
                "roles": ["STATE_ADMIN", "SYSTEM"],
                "active": true
              },
              {
                "tenantId": "ncr",
                "currentState": "PAYOUT_FAILED",
                "action": "MANUAL_RESOLVE",
                "nextState": "RESOLVED",
                "roles": ["STATE_ADMIN"],
                "active": true
              }
            ]
          },
          {
            "tenantId": "ncr",
            "sla": null,
            "state": "RESOLVED",
            "applicationStatus": "RESOLVED",
            "docUploadRequired": false,
            "isStartState": false,
            "isTerminateState": true,
            "isStateUpdatable": false,
            "actions": []
          },
          {
            "tenantId": "ncr",
            "sla": null,
            "state": "UNABLE_TO_LOCATE",
            "applicationStatus": "UNABLE_TO_LOCATE",
            "docUploadRequired": false,
            "isStartState": false,
            "isTerminateState": true,
            "isStateUpdatable": false,
            "actions": []
          }
        ]
      },

      "documents": [
        {
          "code": "SDCRS_DOG_PHOTO",
          "name": "dog-photo",
          "active": true,
          "isMandatory": true,
          "maxSizeInMB": 5,
          "maxFilesAllowed": 3,
          "allowedFileTypes": ["jpeg", "jpg", "png"],
          "workflowAction": ["SUBMIT"]
        },
        {
          "code": "SDCRS_REPORTER_SELFIE",
          "name": "reporter-selfie",
          "active": true,
          "isMandatory": true,
          "maxSizeInMB": 5,
          "maxFilesAllowed": 1,
          "allowedFileTypes": ["jpeg", "jpg", "png"],
          "workflowAction": ["SUBMIT"]
        },
        {
          "code": "SDCRS_CAPTURE_PROOF",
          "name": "capture-proof",
          "active": true,
          "isMandatory": true,
          "maxSizeInMB": 5,
          "maxFilesAllowed": 3,
          "allowedFileTypes": ["jpeg", "jpg", "png"],
          "workflowAction": ["MARK_CAPTURED"]
        },
        {
          "code": "SDCRS_SHELTER_RECEIPT",
          "name": "shelter-receipt",
          "active": true,
          "isMandatory": false,
          "maxSizeInMB": 5,
          "maxFilesAllowed": 1,
          "allowedFileTypes": ["jpeg", "jpg", "png", "pdf"],
          "workflowAction": ["MARK_CAPTURED"]
        }
      ],

      "idgen": [
        {
          "name": "reportNumber",
          "idname": "sdcrs.reportnumber",
          "format": "DJ-SDCRS-[fy:yyyy-yy]-[SEQ_SDCRS_REPORT]",
          "type": "report"
        },
        {
          "name": "trackingId",
          "idname": "sdcrs.trackingid",
          "format": "[CITY.CODE]-[SEQ_SDCRS_TRACK_6]",
          "type": "tracking"
        }
      ],

      "boundary": {
        "hierarchyType": "ADMIN",
        "lowestLevel": "locality"
      },

      "applicant": {
        "types": ["TEACHER"],
        "minimum": 1,
        "maximum": 1
      },

      "access": {
        "roles": ["TEACHER", "VERIFIER", "MC_OFFICER", "MC_SUPERVISOR", "DISTRICT_ADMIN", "STATE_ADMIN"]
      },

      "inbox": {
        "index": "sdcrs-services",
        "module": "SDCRS",
        "sortBy": {
          "path": "Data.auditDetails.createdTime",
          "defaultOrder": "DESC"
        },
        "allowedSearchCriteria": [
          {
            "name": "reportNumber",
            "path": "Data.reportNumber.keyword",
            "operator": "EQUAL",
            "isMandatory": false
          },
          {
            "name": "status",
            "path": "Data.applicationStatus.keyword",
            "operator": "EQUAL",
            "isMandatory": false
          },
          {
            "name": "reportType",
            "path": "Data.reportType.keyword",
            "operator": "EQUAL",
            "isMandatory": false
          },
          {
            "name": "assignee",
            "path": "Data.assignee.keyword",
            "operator": "EQUAL",
            "isMandatory": false
          },
          {
            "name": "locality",
            "path": "Data.address.locality.code.keyword",
            "operator": "EQUAL",
            "isMandatory": false
          }
        ]
      },

      "payout": {
        "enabled": true,
        "triggerState": "CAPTURED",
        "amount": 500,
        "currency": "INR",
        "method": "UPI",
        "maxMonthlyPerTeacher": 5000,
        "maxDailyReports": 5
      },

      "validation": {
        "autoValidation": true,
        "checks": [
          {
            "name": "GPS_MATCH",
            "enabled": true,
            "toleranceMeters": 100
          },
          {
            "name": "BOUNDARY_CHECK",
            "enabled": true
          },
          {
            "name": "TIMESTAMP_CHECK",
            "enabled": true,
            "maxAgeHours": 48
          },
          {
            "name": "DUPLICATE_IMAGE",
            "enabled": true,
            "similarityThreshold": 0.90
          }
        ]
      },

      "localization": {
        "modules": ["rainmaker-sdcrs"]
      }
    }
  ]
}
